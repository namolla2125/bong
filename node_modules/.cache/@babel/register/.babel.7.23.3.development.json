{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\kmc13\\\\Documents\\\\namollatoolbox_bong\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\kmc13\\\\Documents\\\\namollatoolbox_bong\",\"filename\":\"C:\\\\Users\\\\kmc13\\\\Documents\\\\namollatoolbox_bong\\\\src\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\kmc13\\\\Documents\\\\namollatoolbox_bong\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.3:development":{"value":{"code":"\"use strict\";\n\nvar _http = _interopRequireDefault(require(\"http\"));\nvar _ws = _interopRequireDefault(require(\"ws\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n// const sqlite3 = require('sqlite3').verbose();\n// const db = new sqlite3.Database(\"./public/db/index.db\");\nvar app = (0, _express[\"default\"])();\napp.set(\"view engine\", \"pug\");\napp.set(\"views\", __dirname + \"/views\");\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\napp.get(\"/\", function (req, res) {\n  return res.render(\"home\");\n});\napp.get(\"/*\", function (req, res) {\n  return res.redirect(\"/\");\n});\nvar handleListen = function handleListen() {\n  return console.log(\"Listening on http://localhost:3000\");\n};\nvar server = _http[\"default\"].createServer(app);\nvar wss = new _ws[\"default\"].Server({\n  server: server\n});\nwss.on(\"connection\", function (socket) {\n  console.log(\"브라우저와 연결됨\");\n  var sqlite3 = require('sqlite3').verbose();\n  var db_name = _path[\"default\"].join(__dirname, \"db\", \"index.db\");\n  var db = new sqlite3.Database(db_name, function (err) {\n    if (err) {\n      return console.error(err.message);\n    }\n    console.log(\"index.db 데이터 베이스와 연결 성공\");\n  });\n  var readSQL = \"SELECT * FROM bong\";\n  db.all(readSQL, function (err, rows) {\n    if (err) throw err;\n    var dbReadDataList = [];\n    var _iterator = _createForOfIteratorHelper(rows),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var row = _step.value;\n        console.log(row);\n        dbReadDataList.push(row);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    socket.send(JSON.stringify(dbReadDataList));\n  });\n  db.close();\n  socket.on(\"close\", function () {\n    return console.log(\"브라우저와 연결이 끊김\");\n  });\n  socket.on(\"message\", function (msg) {\n    console.log(JSON.parse(msg));\n    var msg2 = JSON.parse(msg);\n    var db = new sqlite3.Database(db_name, function (err) {\n      if (err) {\n        return console.error(err.message);\n      }\n      console.log(\"index.db 데이터 베이스와 연결 성공\");\n    });\n    function addZero(date) {\n      if (date < 10) {\n        var zeroDate = ('00' + date).slice(-2);\n        return zeroDate;\n      }\n      return date;\n    }\n    function datetime() {\n      var date = new Date();\n      var y = addZero(date.getFullYear());\n      var m = addZero(date.getMonth() + 1);\n      var d = addZero(date.getDate());\n      var h = addZero(date.getHours());\n      var tm = addZero(date.getMinutes());\n      var s = addZero(date.getSeconds());\n      return \"\".concat(y, \"-\").concat(m, \"-\").concat(d, \" \").concat(h, \":\").concat(tm, \":\").concat(s);\n    }\n    var SQLrun = [msg2.name, msg2.text, datetime()];\n    var insertSQL = \"INSERT INTO bong (name, detail, date) VALUES (?, ?, ?)\";\n    db.run(insertSQL, SQLrun, function (err) {\n      if (err) {\n        console.log(err.message);\n      }\n      socket.send(\"작성 완료\");\n    });\n    db.close();\n  });\n});\nserver.listen(3000, handleListen);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaHR0cCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3dzIiwiX2V4cHJlc3MiLCJfcGF0aCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsIm8iLCJhbGxvd0FycmF5TGlrZSIsIml0IiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJBcnJheSIsImlzQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJsZW5ndGgiLCJpIiwiRiIsInMiLCJuIiwiZG9uZSIsInZhbHVlIiwiZSIsIl9lIiwiZiIsIlR5cGVFcnJvciIsIm5vcm1hbENvbXBsZXRpb24iLCJkaWRFcnIiLCJlcnIiLCJjYWxsIiwic3RlcCIsIm5leHQiLCJfZTIiLCJtaW5MZW4iLCJfYXJyYXlMaWtlVG9BcnJheSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwic2xpY2UiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJmcm9tIiwidGVzdCIsImFyciIsImxlbiIsImFycjIiLCJhcHAiLCJleHByZXNzIiwic2V0IiwiX19kaXJuYW1lIiwidXNlIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicmVkaXJlY3QiLCJoYW5kbGVMaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwic2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsIndzcyIsIldlYlNvY2tldCIsIlNlcnZlciIsIm9uIiwic29ja2V0Iiwic3FsaXRlMyIsInZlcmJvc2UiLCJkYl9uYW1lIiwicGF0aCIsImpvaW4iLCJkYiIsIkRhdGFiYXNlIiwiZXJyb3IiLCJtZXNzYWdlIiwicmVhZFNRTCIsImFsbCIsInJvd3MiLCJkYlJlYWREYXRhTGlzdCIsIl9pdGVyYXRvciIsIl9zdGVwIiwicm93IiwicHVzaCIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xvc2UiLCJtc2ciLCJwYXJzZSIsIm1zZzIiLCJhZGRaZXJvIiwiZGF0ZSIsInplcm9EYXRlIiwiZGF0ZXRpbWUiLCJEYXRlIiwieSIsImdldEZ1bGxZZWFyIiwibSIsImdldE1vbnRoIiwiZCIsImdldERhdGUiLCJoIiwiZ2V0SG91cnMiLCJ0bSIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiY29uY2F0IiwiU1FMcnVuIiwidGV4dCIsImluc2VydFNRTCIsInJ1biIsImxpc3RlbiJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxrbWMxM1xcRG9jdW1lbnRzXFxuYW1vbGxhdG9vbGJveF9ib25nXFxzcmNcXCIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XHJcbmltcG9ydCBXZWJTb2NrZXQgZnJvbSBcIndzXCI7XHJcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG4vLyBjb25zdCBzcWxpdGUzID0gcmVxdWlyZSgnc3FsaXRlMycpLnZlcmJvc2UoKTtcclxuLy8gY29uc3QgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZShcIi4vcHVibGljL2RiL2luZGV4LmRiXCIpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuXHJcbmFwcC5zZXQoXCJ2aWV3IGVuZ2luZVwiLCBcInB1Z1wiKTtcclxuYXBwLnNldChcInZpZXdzXCIsIF9fZGlybmFtZSArIFwiL3ZpZXdzXCIpO1xyXG5hcHAudXNlKFwiL3B1YmxpY1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyBcIi9wdWJsaWNcIikpXHJcbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4gcmVzLnJlbmRlcihcImhvbWVcIikpO1xyXG5hcHAuZ2V0KFwiLypcIiwgKHJlcSwgcmVzKSA9PiByZXMucmVkaXJlY3QoXCIvXCIpKTtcclxuXHJcbmNvbnN0IGhhbmRsZUxpc3RlbiA9ICgpID0+IGNvbnNvbGUubG9nKFwiTGlzdGVuaW5nIG9uIGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiKTtcclxuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcclxuY29uc3Qgd3NzID0gbmV3IFdlYlNvY2tldC5TZXJ2ZXIoeyBzZXJ2ZXIgfSk7XHJcblxyXG53c3Mub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcclxuICBjb25zb2xlLmxvZyhcIuu4jOudvOyasOyggOyZgCDsl7DqsrDrkKhcIik7XHJcbiAgXHJcbiAgY29uc3Qgc3FsaXRlMyA9IHJlcXVpcmUoJ3NxbGl0ZTMnKS52ZXJib3NlKCk7XHJcbiAgY29uc3QgZGJfbmFtZSA9IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiZGJcIiwgXCJpbmRleC5kYlwiKTtcclxuICBcclxuICBjb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKGRiX25hbWUsIGVyciA9PiB7XHJcbiAgICBpZihlcnIpIHtcclxuICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coXCJpbmRleC5kYiDrjbDsnbTthLAg67Kg7J207Iqk7JmAIOyXsOqysCDshLHqs7VcIik7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHJlYWRTUUwgPSBcIlNFTEVDVCAqIEZST00gYm9uZ1wiXHJcblxyXG4gIGRiLmFsbChyZWFkU1FMLCAoZXJyLCByb3dzKSA9PiB7XHJcbiAgICBpZihlcnIpIHRocm93IGVycjtcclxuICAgIGNvbnN0IGRiUmVhZERhdGFMaXN0ID0gW107XHJcbiAgICBmb3IobGV0IHJvdyBvZiByb3dzKXtcclxuICAgICAgY29uc29sZS5sb2cocm93KVxyXG4gICAgICBkYlJlYWREYXRhTGlzdC5wdXNoKHJvdyk7XHJcbiAgICB9XHJcbiAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShkYlJlYWREYXRhTGlzdCkpO1xyXG4gIH0pXHJcblxyXG4gIGRiLmNsb3NlKCk7XHJcblxyXG4gIHNvY2tldC5vbihcImNsb3NlXCIsICgpID0+IGNvbnNvbGUubG9nKFwi67iM65287Jqw7KCA7JmAIOyXsOqysOydtCDrgYrquYBcIikpXHJcbiAgc29ja2V0Lm9uKFwibWVzc2FnZVwiLCAobXNnKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhKU09OLnBhcnNlKG1zZykpO1xyXG4gICAgdmFyIG1zZzIgPSBKU09OLnBhcnNlKG1zZyk7XHJcblxyXG4gICAgY29uc3QgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZShkYl9uYW1lLCBlcnIgPT4ge1xyXG4gICAgICBpZihlcnIpIHtcclxuICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coXCJpbmRleC5kYiDrjbDsnbTthLAg67Kg7J207Iqk7JmAIOyXsOqysCDshLHqs7VcIik7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYWRkWmVybyhkYXRlKSB7XHJcbiAgICAgIGlmIChkYXRlIDwgMTApIHtcclxuICAgICAgICBjb25zdCB6ZXJvRGF0ZSA9ICgnMDAnICsgZGF0ZSkuc2xpY2UoLTIpO1xyXG4gICAgICAgIHJldHVybiB6ZXJvRGF0ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGRhdGV0aW1lKCkge1xyXG4gICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIHZhciB5ID0gYWRkWmVybyhkYXRlLmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgICB2YXIgbSA9IGFkZFplcm8oZGF0ZS5nZXRNb250aCgpICsgMSk7XHJcbiAgICAgIHZhciBkID0gYWRkWmVybyhkYXRlLmdldERhdGUoKSk7XHJcblxyXG4gICAgICB2YXIgaCA9IGFkZFplcm8oZGF0ZS5nZXRIb3VycygpKTtcclxuICAgICAgdmFyIHRtID0gYWRkWmVybyhkYXRlLmdldE1pbnV0ZXMoKSk7XHJcbiAgICAgIHZhciBzID0gYWRkWmVybyhkYXRlLmdldFNlY29uZHMoKSk7XHJcbiAgXHJcbiAgICAgIHJldHVybiBgJHt5fS0ke219LSR7ZH0gJHtofToke3RtfToke3N9YDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY29uc3QgU1FMcnVuID0gW21zZzIubmFtZSwgbXNnMi50ZXh0LCBkYXRldGltZSgpXTtcclxuICAgIGNvbnN0IGluc2VydFNRTCA9IFwiSU5TRVJUIElOVE8gYm9uZyAobmFtZSwgZGV0YWlsLCBkYXRlKSBWQUxVRVMgKD8sID8sID8pXCI7XHJcblxyXG4gICAgZGIucnVuKGluc2VydFNRTCwgU1FMcnVuLCBlcnIgPT4ge1xyXG4gICAgICBpZihlcnIpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBzb2NrZXQuc2VuZChcIuyekeyEsSDsmYTro4xcIik7XHJcbiAgICB9KTtcclxuICAgIGRiLmNsb3NlKCkgXHJcbiAgfSlcclxufSk7XHJcblxyXG5cclxuXHJcbnNlcnZlci5saXN0ZW4oMzAwMCwgaGFuZGxlTGlzdGVuKTsiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsS0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsR0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsUUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsS0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQXdCLFNBQUFELHVCQUFBSyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsZ0JBQUFBLEdBQUE7QUFBQSxTQUFBRSwyQkFBQUMsQ0FBQSxFQUFBQyxjQUFBLFFBQUFDLEVBQUEsVUFBQUMsTUFBQSxvQkFBQUgsQ0FBQSxDQUFBRyxNQUFBLENBQUFDLFFBQUEsS0FBQUosQ0FBQSxxQkFBQUUsRUFBQSxRQUFBRyxLQUFBLENBQUFDLE9BQUEsQ0FBQU4sQ0FBQSxNQUFBRSxFQUFBLEdBQUFLLDJCQUFBLENBQUFQLENBQUEsTUFBQUMsY0FBQSxJQUFB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","map":{"version":3,"names":["_http","_interopRequireDefault","require","_ws","_express","_path","obj","__esModule","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","app","express","set","__dirname","use","get","req","res","render","redirect","handleListen","console","log","server","http","createServer","wss","WebSocket","Server","on","socket","sqlite3","verbose","db_name","path","join","db","Database","error","message","readSQL","all","rows","dbReadDataList","_iterator","_step","row","push","send","JSON","stringify","close","msg","parse","msg2","addZero","date","zeroDate","datetime","Date","y","getFullYear","m","getMonth","d","getDate","h","getHours","tm","getMinutes","getSeconds","concat","SQLrun","text","insertSQL","run","listen"],"sourceRoot":"C:\\Users\\kmc13\\Documents\\namollatoolbox_bong\\src\\","sources":["server.js"],"sourcesContent":["import http from \"http\";\r\nimport WebSocket from \"ws\";\r\nimport express from 'express';\r\nimport path from \"path\";\r\n// const sqlite3 = require('sqlite3').verbose();\r\n// const db = new sqlite3.Database(\"./public/db/index.db\");\r\n\r\nconst app = express();\r\n\r\n\r\napp.set(\"view engine\", \"pug\");\r\napp.set(\"views\", __dirname + \"/views\");\r\napp.use(\"/public\", express.static(__dirname + \"/public\"))\r\napp.get(\"/\", (req, res) => res.render(\"home\"));\r\napp.get(\"/*\", (req, res) => res.redirect(\"/\"));\r\n\r\nconst handleListen = () => console.log(\"Listening on http://localhost:3000\");\r\nconst server = http.createServer(app);\r\nconst wss = new WebSocket.Server({ server });\r\n\r\nwss.on(\"connection\", (socket) => {\r\n  console.log(\"브라우저와 연결됨\");\r\n  \r\n  const sqlite3 = require('sqlite3').verbose();\r\n  const db_name = path.join(__dirname, \"db\", \"index.db\");\r\n  \r\n  const db = new sqlite3.Database(db_name, err => {\r\n    if(err) {\r\n      return console.error(err.message);\r\n    }\r\n    console.log(\"index.db 데이터 베이스와 연결 성공\");\r\n  });\r\n\r\n  const readSQL = \"SELECT * FROM bong\"\r\n\r\n  db.all(readSQL, (err, rows) => {\r\n    if(err) throw err;\r\n    const dbReadDataList = [];\r\n    for(let row of rows){\r\n      console.log(row)\r\n      dbReadDataList.push(row);\r\n    }\r\n    socket.send(JSON.stringify(dbReadDataList));\r\n  })\r\n\r\n  db.close();\r\n\r\n  socket.on(\"close\", () => console.log(\"브라우저와 연결이 끊김\"))\r\n  socket.on(\"message\", (msg) => {\r\n    console.log(JSON.parse(msg));\r\n    var msg2 = JSON.parse(msg);\r\n\r\n    const db = new sqlite3.Database(db_name, err => {\r\n      if(err) {\r\n        return console.error(err.message);\r\n      }\r\n      console.log(\"index.db 데이터 베이스와 연결 성공\");\r\n    });\r\n\r\n\r\n    function addZero(date) {\r\n      if (date < 10) {\r\n        const zeroDate = ('00' + date).slice(-2);\r\n        return zeroDate;\r\n      }\r\n      return date;\r\n    }\r\n    function datetime() {\r\n      var date = new Date();\r\n      var y = addZero(date.getFullYear());\r\n      var m = addZero(date.getMonth() + 1);\r\n      var d = addZero(date.getDate());\r\n\r\n      var h = addZero(date.getHours());\r\n      var tm = addZero(date.getMinutes());\r\n      var s = addZero(date.getSeconds());\r\n  \r\n      return `${y}-${m}-${d} ${h}:${tm}:${s}`;\r\n    }\r\n\r\n\r\n    const SQLrun = [msg2.name, msg2.text, datetime()];\r\n    const insertSQL = \"INSERT INTO bong (name, detail, date) VALUES (?, ?, ?)\";\r\n\r\n    db.run(insertSQL, SQLrun, err => {\r\n      if(err){\r\n        console.log(err.message);\r\n      }\r\n      socket.send(\"작성 완료\");\r\n    });\r\n    db.close() \r\n  })\r\n});\r\n\r\n\r\n\r\nserver.listen(3000, handleListen);"],"mappings":"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"}},"mtime":1700560212835}}